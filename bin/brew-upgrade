#!/bin/bash -e

BREW_DIRS="/usr/local/bin /usr/local/etc /usr/local/sbin /usr/local/share /usr/local/share/doc"

brew update

# awk trims the whitespace.
num_outdated=$(brew outdated | wc -l | awk '{$1=$1};1')
if [ ${num_outdated} -eq 0 ] 
then
  echo "No outdated formula"
  exit
fi
echo "Num outdated formula(s): ${num_outdated}"

sudo chown -R $(whoami) ${BREW_DIRS}
chmod u+w ${BREW_DIRS}
brew upgrade
